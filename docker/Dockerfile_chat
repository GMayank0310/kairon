ARG BASE_IMAGE=kairon-base:latest
FROM $BASE_IMAGE

WORKDIR ${KAIRON_HOME}

ENV APP_MODULE=kairon.chat.server:main TIMEOUT=120 LOG_LEVEL_LIBRARIES=error

RUN cp kairon/shared/rule_policy.py /usr/local/lib/python3.10/site-packages/rasa/core/policies/rule_policy.py

EXPOSE 5000
CMD uvicorn ${APP_MODULE} --host 0.0.0.0 --port 5000  --log-level ${LOG_LEVEL_LIBRARIES}

